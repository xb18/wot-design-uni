var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,r=(a,l,s)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s,u=(e,a)=>{for(var l in a||(a={}))c.call(a,l)&&r(e,l,a[l]);if(s)for(var l of s(a))t.call(a,l)&&r(e,l,a[l]);return e},o=(e,s)=>a(e,l(s)),n=(e,a,l)=>new Promise(((s,c)=>{var t=e=>{try{u(l.next(e))}catch(a){c(a)}},r=e=>{try{u(l.throw(e))}catch(a){c(a)}},u=e=>e.done?s(e.value):Promise.resolve(e.value).then(t,r);u((l=l.apply(e,a)).next())}));import{d,r as i,C as h,y as v,c as f,G as p,N as m,b as y,g as _,w as b,h as w,D as C,z as g,i as x,E as j,k,q as O,j as S,t as V,l as P,ao as $}from"./index-ChV97F5w.js";import{a as I,c as L,m as T,b as W,w as B,_ as D}from"./base64.D3gEw_Hf.js";import{u as E}from"./useTranslate.BPiTMMfr.js";const G=o(u({},W),{customInputClass:I(""),modelValue:I(""),useSuffixSlot:L(!1),placeholder:String,cancelTxt:String,light:L(!1),hideCancel:L(!1),disabled:L(!1),maxlength:T(-1),placeholderLeft:L(!1),focus:L(!1),focusWhenClear:L(!1),placeholderStyle:String,placeholderClass:I("")}),q=D(d(o(u({},{name:"wd-search",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),{props:G,emits:["update:modelValue","change","clear","search","focus","blur","cancel"],setup(e,{emit:a}){const l=e,s=a,{translate:c}=E("search"),t=i(!1),r=i(!1),u=i(""),o=i(!0),d=i(!1);h((()=>l.modelValue),(e=>{u.value=e,e&&(r.value=!0)}),{immediate:!0}),h((()=>l.focus),(e=>{if(e){if(l.disabled)return;W()}})),v((()=>{l.focus&&W()}));const I=f((()=>`wd-search  ${l.light?"is-light":""}  ${l.hideCancel?"is-without-cancel":""} ${l.customClass}`)),L=f((()=>{const e={display:""===u.value&&o.value?"flex":"none"};return p(e)}));function T(e){return n(this,null,(function*(){r.value=e,yield m(),t.value=e}))}function W(){return n(this,null,(function*(){l.disabled||(yield m(100),o.value=!1,T(!0))}))}function D(e){u.value=e.detail.value,s("update:modelValue",e.detail.value),s("change",{value:e.detail.value})}function G(){return n(this,null,(function*(){u.value="",l.focusWhenClear&&(d.value=!0,t.value=!1),yield m(),l.focusWhenClear?(o.value=!1,T(!0)):(o.value=!0,T(!1)),s("change",{value:""}),s("update:modelValue",""),s("clear")}))}function q({detail:{value:e}}){s("search",{value:e})}function z(){o.value=!1,s("focus",{value:u.value})}function F(){return n(this,null,(function*(){yield m(150),d.value?d.value=!1:(o.value=!u.value,r.value=!o.value,t.value=!1,s("blur",{value:u.value}))}))}function H(){s("cancel",{value:u.value})}return(e,a)=>{const l=k,s=x,o=$;return _(),y(s,{class:O(I.value),style:j(e.customStyle)},{default:b((()=>[w(s,{class:"wd-search__block"},{default:b((()=>[C(e.$slots,"prefix",{},void 0,!0),w(s,{class:"wd-search__field"},{default:b((()=>[e.placeholderLeft?g("",!0):(_(),y(s,{key:0,style:j(L.value),class:"wd-search__cover",onClick:W},{default:b((()=>[w(B,{name:"search","custom-class":"wd-search__search-icon"}),w(l,{class:O(`wd-search__placeholder-txt ${e.placeholderClass}`)},{default:b((()=>[S(V(e.placeholder||P(c)("search")),1)])),_:1},8,["class"])])),_:1},8,["style"])),r.value||u.value||e.placeholderLeft?(_(),y(B,{key:1,name:"search","custom-class":"wd-search__search-left-icon"})):g("",!0),r.value||u.value||e.placeholderLeft?(_(),y(o,{key:2,placeholder:e.placeholder||P(c)("search"),"placeholder-class":`wd-search__placeholder-txt ${e.placeholderClass}`,"placeholder-style":e.placeholderStyle,"confirm-type":"search",modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),class:O(["wd-search__input",e.customInputClass]),onFocus:z,onInput:D,onBlur:F,onConfirm:q,disabled:e.disabled,maxlength:e.maxlength,focus:t.value},null,8,["placeholder","placeholder-class","placeholder-style","modelValue","class","disabled","maxlength","focus"])):g("",!0),u.value?(_(),y(B,{key:3,"custom-class":"wd-search__clear wd-search__clear-icon",name:"error-fill",onClick:G})):g("",!0)])),_:1})])),_:3}),e.hideCancel?g("",!0):C(e.$slots,"suffix",{key:0},(()=>[w(s,{class:"wd-search__cancel",onClick:H},{default:b((()=>[S(V(e.cancelTxt||P(c)("cancel")),1)])),_:1})]),!0)])),_:3},8,["class","style"])}}})),[["__scopeId","data-v-c645c39d"]]);export{q as _};
