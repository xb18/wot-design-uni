var e=Object.defineProperty,t=Object.defineProperties,o=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,l=(t,o,a)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a,r=(e,t)=>{for(var o in t||(t={}))s.call(t,o)&&l(e,o,t[o]);if(a)for(var o of a(t))n.call(t,o)&&l(e,o,t[o]);return e},i=(e,a)=>t(e,o(a));import{a3 as c,r as u,ad as p,af as d,d as m,c as f,an as w,aA as y,Q as b,B as h,C as _,b as x,g as C,w as B,h as g,i as P,q as v,z as V,j as z,t as k,m as E,D as O,F as T,l as j,aB as I,a8 as M,R as S}from"./index-ChV97F5w.js";import{g as $}from"./page-wraper.D9WpzC1k.js";import{_ as R}from"./wd-button.DXEkLyH0.js";import{_ as N}from"./wd-input.Bbnatfb8.js";import{c as A,a as D,b as G,_ as U}from"./base64.D3gEw_Hf.js";import{u as q}from"./useTranslate.BPiTMMfr.js";const F="__MESSAGE_OPTION__",H=Symbol("None"),Q={title:"",showCancelButton:!1,show:!1,closeOnClickModal:!0,msg:"",type:"alert",inputType:"text",inputValue:"",showErr:!1,zIndex:99,lazyRender:!0,inputError:""};function J(e=""){const t=e?F+e:F,o=c(t,u(H));o.value===H&&(o.value=Q,d(t,o));const a=e=>t=>{const o=p({type:e},"string"==typeof t?{title:t}:t);return"confirm"===o.type||"prompt"===o.type?o.showCancelButton=!0:o.showCancelButton=!1,s(o)},s=e=>new Promise(((t,a)=>{const s=p(Q,"string"==typeof e?{title:e}:e);o.value=p(s,{show:!0,success:e=>{i(),t(e)},fail:e=>{i(),a(e)}})})),n=a("alert"),l=a("confirm"),r=a("prompt"),i=()=>{o.value!==H&&(o.value.show=!1)};return{show:s,alert:n,confirm:l,prompt:r,close:i}}const K=i(r({},G),{selector:D(""),rootPortal:A(!1)}),L=U(m(i(r({},{name:"wd-message-box",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),{props:K,setup(e){const t=e,{translate:o}=q("message-box"),a=f((()=>`wd-message-box__container ${t.customClass}`)),s=f((()=>`wd-message-box__body ${i.title?"":"is-no-title"} ${"prompt"===i.type?"is-prompt":""}`)),n=(l=t.selector)?`${F}${l}`:F;var l;const r=c(n,u(Q)),i=w({msg:"",show:!1,title:"",showCancelButton:!1,closeOnClickModal:!0,confirmButtonText:"",cancelButtonText:"",type:"alert",inputType:"text",inputValue:"",inputPlaceholder:"",inputError:"",showErr:!1,zIndex:99,lazyRender:!0}),p=f((()=>{const e=y({block:!0},h(i.confirmButtonProps)?b(i.confirmButtonProps,S):{});return e.customClass=`${e.customClass||""} wd-message-box__actions-btn`,e})),d=f((()=>{const e=y({block:!0,type:"info"},h(i.cancelButtonProps)?b(i.cancelButtonProps,S):{});return e.customClass=`${e.customClass||""} wd-message-box__actions-btn`,e}));function m(e){if(("modal"!==e||i.closeOnClickModal)&&("prompt"!==i.type||"confirm"!==e||function(){if(i.inputPattern&&!i.inputPattern.test(String(i.inputValue)))return i.showErr=!0,!1;if("function"==typeof i.inputValidate){if(!i.inputValidate(i.inputValue))return i.showErr=!0,!1}return i.showErr=!1,!0}()))switch(e){case"confirm":i.beforeConfirm?i.beforeConfirm({resolve:t=>{t&&A({action:e,value:i.inputValue})}}):A({action:e,value:i.inputValue});break;case"cancel":D({action:e});break;default:D({action:"modal"})}}function A(e){i.show=!1,M(i.success)&&i.success(e)}function D(e){i.show=!1,M(i.fail)&&i.fail(e)}function G({value:e}){""!==e?i.inputValue=e:i.showErr=!1}return _((()=>r.value),(e=>{var t;(t=e)&&(i.title=h(t.title)?t.title:"",i.showCancelButton=!!h(t.showCancelButton)&&t.showCancelButton,i.show=t.show,i.closeOnClickModal=t.closeOnClickModal,i.confirmButtonText=t.confirmButtonText,i.cancelButtonText=t.cancelButtonText,i.msg=t.msg,i.type=t.type,i.inputType=t.inputType,i.inputSize=t.inputSize,i.inputValue=t.inputValue,i.inputPlaceholder=t.inputPlaceholder,i.inputPattern=t.inputPattern,i.inputValidate=t.inputValidate,i.success=t.success,i.fail=t.fail,i.beforeConfirm=t.beforeConfirm,i.inputError=t.inputError,i.showErr=t.showErr,i.zIndex=t.zIndex,i.lazyRender=t.lazyRender,i.confirmButtonProps=t.confirmButtonProps,i.cancelButtonProps=t.cancelButtonProps)}),{deep:!0,immediate:!0}),_((()=>i.show),(e=>{!1===!!e&&(i.showErr=!1)}),{deep:!0,immediate:!0}),(e,t)=>{const n=P;return C(),x(n,null,{default:B((()=>[g($,{transition:"zoom-in",modelValue:i.show,"onUpdate:modelValue":t[3]||(t[3]=e=>i.show=e),"close-on-click-modal":i.closeOnClickModal,"lazy-render":i.lazyRender,"custom-class":"wd-message-box",onClickModal:t[4]||(t[4]=e=>m("modal")),"z-index":i.zIndex,duration:200,"root-portal":e.rootPortal},{default:B((()=>[g(n,{class:v(a.value)},{default:B((()=>[g(n,{class:v(s.value)},{default:B((()=>[i.title?(C(),x(n,{key:0,class:"wd-message-box__title"},{default:B((()=>[z(k(i.title),1)])),_:1})):V("",!0),g(n,{class:"wd-message-box__content"},{default:B((()=>["prompt"===i.type?(C(),E(T,{key:0},[g(N,{modelValue:i.inputValue,"onUpdate:modelValue":t[0]||(t[0]=e=>i.inputValue=e),type:i.inputType,size:i.inputSize,placeholder:i.inputPlaceholder,onInput:G},null,8,["modelValue","type","size","placeholder"]),i.showErr?(C(),x(n,{key:0,class:"wd-message-box__input-error"},{default:B((()=>[z(k(i.inputError||j(o)("inputNoValidate")),1)])),_:1})):V("",!0)],64)):V("",!0),O(e.$slots,"default",{},(()=>[z(k(i.msg),1)]),!0)])),_:3})])),_:3},8,["class"]),g(n,{class:v("wd-message-box__actions "+(i.showCancelButton?"wd-message-box__flex":"wd-message-box__block"))},{default:B((()=>[i.showCancelButton?(C(),x(R,I({key:0},d.value,{onClick:t[1]||(t[1]=e=>m("cancel"))}),{default:B((()=>[z(k(i.cancelButtonText||j(o)("cancel")),1)])),_:1},16)):V("",!0),g(R,I(p.value,{onClick:t[2]||(t[2]=e=>m("confirm"))}),{default:B((()=>[z(k(i.confirmButtonText||j(o)("confirm")),1)])),_:1},16)])),_:1},8,["class"])])),_:3},8,["class"])])),_:3},8,["modelValue","close-on-click-modal","lazy-render","z-index","root-portal"])])),_:3})}}})),[["__scopeId","data-v-43a902ae"]]);export{L as _,J as u};
